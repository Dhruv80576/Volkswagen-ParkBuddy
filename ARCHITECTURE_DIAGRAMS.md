# Complete Parking System Architecture - Visual Overview

## Table of Contents
1. [Brief System Overview](#brief-system-overview)
2. [Detailed End-to-End Architecture](#detailed-end-to-end-architecture)
3. [Parking Slot Detection Flow](#parking-slot-detection-flow)
4. [Dynamic Pricing Architecture](#dynamic-pricing-architecture)
5. [Booking System Flow](#booking-system-flow)

---

## Brief System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PARKING LOT (Physical Layer)                     â”‚
â”‚                                                                     â”‚
â”‚  ğŸš— [Slot 1]  ğŸš— [Slot 2]  â¬œ [Slot 3]  ğŸš— [Slot 4]  â¬œ [Slot 5]  â”‚
â”‚   Occupied    Occupied     Empty       Occupied     Empty           â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“· Sensors/Cameras â†’ Detect occupancy in real-time                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND SERVICES (Processing Layer)             â”‚
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Go Backend     â”‚  â”‚ ML Pricing API  â”‚  â”‚ Availability ML    â”‚   â”‚
â”‚  â”‚ :8080          â”‚  â”‚ :5000           â”‚  â”‚ Model              â”‚   â”‚
â”‚  â”‚                â”‚  â”‚                 â”‚  â”‚                    â”‚   â”‚
â”‚  â”‚ â€¢ H3 Index     â”‚  â”‚ â€¢ XGBoost Model â”‚  â”‚ â€¢ Predict Future   â”‚   â”‚
â”‚  â”‚ â€¢ Matching     â”‚  â”‚ â€¢ 26+ Features  â”‚  â”‚   Availability     â”‚   â”‚
â”‚  â”‚ â€¢ Bookings     â”‚  â”‚ â€¢ Surge Pricing â”‚  â”‚ â€¢ Demand Forecast  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MOBILE APP (User Interface Layer)                 â”‚
â”‚                                                                      â”‚
â”‚  ğŸ“± Flutter App                                                      â”‚
â”‚  â€¢ Real-time slot availability                                      â”‚
â”‚  â€¢ Dynamic pricing display                                          â”‚
â”‚  â€¢ Interactive map with markers                                     â”‚
â”‚  â€¢ Book & pay for parking                                           â”‚
â”‚  â€¢ Navigate to slot                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â†“
                          ğŸ‘¤ USER
```

---

## Detailed End-to-End Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PHYSICAL PARKING LOT INFRASTRUCTURE                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Parking Slot Detection Methods:                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                   â”‚
â”‚                                                                             â”‚
â”‚  1ï¸âƒ£  SENSOR-BASED DETECTION                                                â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚     â”‚ ğŸ“¡ IoT Sensorâ”‚ â† Ultrasonic/Magnetic/Infrared sensors                 â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚            â”‚ Detects: Vehicle presence/absence                              â”‚
â”‚            â†“                                                                â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚     â”‚ Edge Gateway â”‚ â† Aggregates sensor data                               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚            â”‚ Protocol: MQTT/HTTP/WebSocket                                  â”‚
â”‚            â†“                                                                â”‚
â”‚                                                                             â”‚
â”‚  2ï¸âƒ£  CAMERA-BASED DETECTION (Recommended)                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚     â”‚ ğŸ“· IP Camera â”‚ â† Computer vision (YOLO/CNN)                          â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚            â”‚ Analyzes: License plates, vehicle detection                    â”‚
â”‚            â†“                                                                â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚     â”‚ CV Processor â”‚ â† Real-time image analysis                             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚            â”‚ Output: Slot ID, Status, Timestamp                             â”‚
â”‚            â†“                                                                â”‚
â”‚                                                                             â”‚
â”‚  3ï¸âƒ£  MANUAL/SIMULATED INPUT (Current Implementation)                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚     â”‚ JSON Config  â”‚ â† parking_slots_all.json                               â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚            â”‚ Contains: Slot metadata, initial states                        â”‚
â”‚            â†“                                                                â”‚
â”‚                                                                             â”‚
â”‚  All Methods Converge Here:                                                 â”‚
â”‚  â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼â–¼                                                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚     â”‚  DATA AGGREGATION LAYER          â”‚                                    â”‚
â”‚     â”‚                                  â”‚                                    â”‚
â”‚     â”‚  Format: {                       â”‚                                    â”‚
â”‚     â”‚    "slotId": "MUM_AIRPORT_A01",  â”‚                                    â”‚
â”‚     â”‚    "isOccupied": false,          â”‚                                    â”‚
â”‚     â”‚    "timestamp": "2025-11-08...", â”‚                                    â”‚
â”‚     â”‚    "location": {lat, lng},       â”‚                                    â”‚
â”‚     â”‚    "type": "airport",            â”‚                                    â”‚
â”‚     â”‚    "amenities": [...],           â”‚                                    â”‚
â”‚     â”‚    "basePrice": 50               â”‚                                    â”‚
â”‚     â”‚  }                               â”‚                                    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                    â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ Real-time Updates (WebSocket/Polling)
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          BACKEND PROCESSING LAYER                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                    GO BACKEND SERVER (:8080)                      â”‚     â”‚
â”‚  â”‚  Language: Go (Golang)                                            â”‚     â”‚
â”‚  â”‚  Framework: Gin                                                   â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚                                                                   â”‚     â”‚
â”‚  â”‚  ğŸ“¦ DATA STORAGE                                                  â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚  â”‚  â”‚ parking_slots_all.json                          â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ 100+ parking slots across 5 cities            â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Mumbai, Delhi, Bangalore, Chennai, Trichy     â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Types: Airport, Mall, Street, Residential     â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Amenities: EV, Security, Covered, Handicap    â”‚             â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚  â”‚                                                                   â”‚     â”‚
â”‚  â”‚  ğŸ—ºï¸  H3 GEOSPATIAL INDEXING                                      â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Uber's H3 hexagonal hierarchical index        â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Resolution: 9 (~174m hexagons)                â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Fast proximity search O(1)                    â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Index: map[H3Index][]ParkingSlot              â”‚             â”‚     â”‚
â”‚  â”‚  â”‚                                                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Example:                                        â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ User at (19.0760, 72.8777) â†’ H3: 89283082a3ffffâ”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â†’ Returns all slots in that hexagon + neighborsâ”‚             â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚  â”‚                                                                   â”‚     â”‚
â”‚  â”‚  ğŸ”— BIPARTITE MATCHING ALGORITHM                                 â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚  â”‚  â”‚ Purpose: Optimal user-to-slot assignment        â”‚             â”‚     â”‚
â”‚  â”‚  â”‚                                                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Input: User location + preferences              â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Process:                                        â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   1. Find candidates (H3 proximity)             â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   2. Calculate scores for each slot:            â”‚             â”‚     â”‚
â”‚  â”‚  â”‚      Score = w1Ã—Distance                        â”‚             â”‚     â”‚
â”‚  â”‚  â”‚            + w2Ã—Price                           â”‚             â”‚     â”‚
â”‚  â”‚  â”‚            + w3Ã—Amenities Match                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   3. Hungarian algorithm for optimal matching   â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   4. Return ranked slot recommendations         â”‚             â”‚     â”‚
â”‚  â”‚  â”‚                                                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Output: Sorted array of best slots              â”‚             â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚  â”‚                                                                   â”‚     â”‚
â”‚  â”‚  ğŸ“‹ BOOKING MANAGEMENT                                           â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ In-memory booking store (production: DB)      â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Concurrent booking handling with mutexes      â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Booking states: pending, confirmed, completed â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Auto-expiry for pending bookings (15 min)     â”‚             â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚  â”‚                                                                   â”‚     â”‚
â”‚  â”‚  ğŸ”Œ API ENDPOINTS                                                â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚  â”‚  â”‚ GET  /api/parking/search                        â”‚             â”‚     â”‚
â”‚  â”‚  â”‚      â†’ Find slots near location                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ GET  /api/parking/slot/:id                      â”‚             â”‚     â”‚
â”‚  â”‚  â”‚      â†’ Get specific slot details                â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ POST /api/booking/create                        â”‚             â”‚     â”‚
â”‚  â”‚  â”‚      â†’ Create new booking                       â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ GET  /api/booking/:id                           â”‚             â”‚     â”‚
â”‚  â”‚  â”‚      â†’ Get booking status                       â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ POST /api/booking/:id/confirm                   â”‚             â”‚     â”‚
â”‚  â”‚  â”‚      â†’ Confirm payment & booking                â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ GET  /api/statistics                            â”‚             â”‚     â”‚
â”‚  â”‚  â”‚      â†’ System analytics                         â”‚             â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚              ML PRICING API (:5000) - Python/Flask                â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚                                                                   â”‚     â”‚
â”‚  â”‚  ğŸ§  XGBOOST DYNAMIC PRICING MODEL                                â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚  â”‚  â”‚ Training Data: 75,000+ samples                  â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Features (26+):                                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Temporal: hour, day_of_week, is_weekend     â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Location: city, parking_type, area          â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Demand: occupancy_rate, demand_score        â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Context: weather, events, holidays          â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Amenities: ev_charging, security, etc.      â”‚             â”‚     â”‚
â”‚  â”‚  â”‚                                                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Model Performance:                              â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ RÂ² Score: 0.88 - 0.92                       â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ MAE: â‚¹8-12                                  â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Response Time: 50-200ms                     â”‚             â”‚     â”‚
â”‚  â”‚  â”‚                                                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Output:                                         â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Predicted price (â‚¹/hour)                    â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Price multiplier (vs base)                  â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Confidence level                            â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Demand category (low/med/high)              â”‚             â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚  â”‚                                                                   â”‚     â”‚
â”‚  â”‚  ğŸ”„ FALLBACK: SIMULATION MODE                                    â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚  â”‚  â”‚ When ML API unavailable:                        â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Rule-based multiplier system                  â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ 10 independent factors                        â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ ~95% accuracy vs ML model                     â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ <1ms response time                            â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ â€¢ Zero network dependency                       â”‚             â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚  â”‚                                                                   â”‚     â”‚
â”‚  â”‚  ğŸ”Œ API ENDPOINTS                                                â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚  â”‚  â”‚ GET  /health                                    â”‚             â”‚     â”‚
â”‚  â”‚  â”‚      â†’ API health check                         â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ POST /api/predict-price                         â”‚             â”‚     â”‚
â”‚  â”‚  â”‚      â†’ Single slot price prediction             â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ POST /api/batch-predict                         â”‚             â”‚     â”‚
â”‚  â”‚  â”‚      â†’ Multiple slots pricing (bulk)            â”‚             â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         AVAILABILITY PREDICTION ML MODEL - Python/Scikit          â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚                                                                   â”‚     â”‚
â”‚  â”‚  ğŸ”® FUTURE AVAILABILITY FORECASTING                              â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚  â”‚  â”‚ Purpose: Predict slot availability 1-24hrs aheadâ”‚             â”‚     â”‚
â”‚  â”‚  â”‚                                                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Model: Random Forest Classifier                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Training: Historical occupancy patterns         â”‚             â”‚     â”‚
â”‚  â”‚  â”‚                                                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Features:                                       â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Time patterns (hour, day, season)           â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Location characteristics                    â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Historical occupancy trends                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚   â€¢ Event calendar integration                  â”‚             â”‚     â”‚
â”‚  â”‚  â”‚                                                 â”‚             â”‚     â”‚
â”‚  â”‚  â”‚ Output: Probability of availability (0-1)       â”‚             â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ RESTful APIs (HTTP/JSON)
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MOBILE APPLICATION LAYER                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ğŸ“± FLUTTER MOBILE APP (Android/iOS)                                        â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                               â”‚
â”‚                                                                             â”‚
â”‚  ğŸ¨ UI SCREENS                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚  1. HOME/SEARCH SCREEN                                         â”‚       â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ—ºï¸  Interactive Google Map        â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â€¢ User location (GPS)             â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â€¢ Parking slot markers            â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚   - Green: Available              â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚   - Red: Occupied                 â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚   - Blue: Reserved                â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â€¢ Cluster markers (zoom out)      â”‚                      â”‚       â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚       â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ” Search Bar                     â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ "Search address or landmark..."   â”‚                      â”‚       â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚       â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ›ï¸  Filters                       â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ [Type] [Price] [Amenities] [Time] â”‚                      â”‚       â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚  2. SLOT DETAILS BOTTOM SHEET                                  â”‚       â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ“ Mumbai Airport - A01           â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚                                   â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ’° DYNAMIC PRICING                â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â•‘ ğŸ”´ SURGE PRICING             â•‘  â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â•‘ â‚¹185/hr  (was â‚¹150/hr)       â•‘  â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â•‘ 1.5x surge â€¢ High demand     â•‘  â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚                                   â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ“Š Availability: â¬œâ¬œâ¬œâ¬œâ¬› 80%    â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ“ Distance: 2.3 km (8 min drive)â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ…¿ï¸  Type: Covered, Multi-level   â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ âš¡ Amenities: [EV] [Security] [ğŸš»]â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚                                   â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ [ğŸ“ Navigate]  [ğŸ“… Book Now]     â”‚                      â”‚       â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚  3. BOOKING SCREEN                                             â”‚       â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚       â”‚
â”‚  â”‚     â”‚ â° Duration                        â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ From: 2:00 PM  To: 5:00 PM        â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ [- 30min] [3 hours] [+ 30min]     â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚                                   â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ’³ Payment Summary                â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ Base: â‚¹150 Ã— 3 hrs = â‚¹450        â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ Surge (1.5x):        +â‚¹225       â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ Tax (18%):           +â‚¹121.50    â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ Total:               â‚¹796.50     â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚                                   â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ [ğŸ’³ Pay with UPI/Card/Wallet]    â”‚                      â”‚       â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚  4. ACTIVE BOOKING SCREEN                                      â”‚       â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚       â”‚
â”‚  â”‚     â”‚ âœ… Booking Confirmed               â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ Slot: MUM_AIRPORT_A01             â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚                                   â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ â° Time Remaining: 2h 34m          â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 67%                â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚                                   â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ”¢ Entry Code: #4729              â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ ğŸ“± QR Code: [â–“â–“â–“â–“â–“â–“â–“â–“]            â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚                                   â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ [ğŸ—ºï¸  Navigate to Slot]           â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ [â° Extend Booking]                â”‚                      â”‚       â”‚
â”‚  â”‚     â”‚ [âœ•  Cancel Booking]               â”‚                      â”‚       â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  âš™ï¸  CORE SERVICES                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚  â€¢ ParkingService: Backend API integration                     â”‚       â”‚
â”‚  â”‚  â€¢ PricingService: Dynamic pricing (API + Simulation modes)    â”‚       â”‚
â”‚  â”‚  â€¢ LocationService: GPS, geocoding, distance calculation       â”‚       â”‚
â”‚  â”‚  â€¢ BookingService: Booking lifecycle management               â”‚       â”‚
â”‚  â”‚  â€¢ PaymentService: Payment gateway integration                â”‚       â”‚
â”‚  â”‚  â€¢ NotificationService: Push notifications, reminders          â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“¦ KEY MODELS                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  â€¢ ParkingSlot: Slot data with location, amenities, pricing    â”‚       â”‚
â”‚  â”‚  â€¢ Booking: Booking details, status, payment info              â”‚       â”‚
â”‚  â”‚  â€¢ PricePrediction: Dynamic price, multiplier, confidence      â”‚       â”‚
â”‚  â”‚  â€¢ User: User profile, preferences, history                    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â†“
                         ğŸ‘¤ END USER
                    (Driver seeking parking)

```

---

## Parking Slot Detection Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PARKING LOT SENSOR INFRASTRUCTURE                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

OPTION 1: IoT Sensor Network
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                    Parking Slot
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   ğŸš—     â”‚  â† Vehicle parked
                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                        â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ğŸ“¡ Ultrasonic    â”‚  Detects distance to object
              â”‚  Sensor (HC-SR04) â”‚  Empty: >50cm, Occupied: <50cm
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Microcontroller   â”‚  ESP32/Arduino
              â”‚  â€¢ Read sensor     â”‚  Processes sensor data
              â”‚  â€¢ Debouncing      â”‚  Filters false positives
              â”‚  â€¢ Status LED      â”‚  Local indicator
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ WiFi/LoRa/BLE
                        â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Edge Gateway      â”‚  Aggregates 50-100 sensors
              â”‚   â€¢ MQTT Broker     â”‚  Protocols: MQTT/CoAP
              â”‚   â€¢ Data buffer     â”‚  Handles network outages
              â”‚   â€¢ Timestamp       â”‚  Adds metadata
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ Publish: topic/parking/slot/{id}
                        â”‚ Payload: {"slotId": "...", "occupied": true, "ts": ...}
                        â†“

OPTION 2: Computer Vision (Camera-based)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
              Parking Area (Top View)
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ ğŸš—  ğŸš—  â¬œ  ğŸš—  â¬œ  â”‚
              â”‚  A   B   C   D   E  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                  â”‚  ğŸ“· IP Cam  â”‚  4K resolution, wide-angle
                  â”‚  â€¢ 30 FPS   â”‚  Covers 20-50 slots
                  â”‚  â€¢ IR Night â”‚  24/7 operation
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Video Stream (RTSP)
                         â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Computer Vision     â”‚  Edge AI device or cloud
              â”‚  Processor           â”‚
              â”‚                      â”‚
              â”‚  ğŸ§  YOLO v8 Model    â”‚
              â”‚  â€¢ Vehicle detection â”‚  Confidence > 85%
              â”‚  â€¢ Bounding boxes    â”‚  Track each slot zone
              â”‚  â€¢ License plate OCR â”‚  Optional: identify vehicle
              â”‚                      â”‚
              â”‚  Process:            â”‚
              â”‚  1. Frame capture    â”‚
              â”‚  2. ROI extraction   â”‚  Region of Interest per slot
              â”‚  3. Object detection â”‚
              â”‚  4. Slot mapping     â”‚  Map detections to slot IDs
              â”‚  5. State change     â”‚  Detect transitions
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Output: [{slotId, occupied, confidence, vehicle_type}]
                         â†“

OPTION 3: Ground Sensors (Magnetic/Pressure)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                 Parking Slot
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚    ğŸš—      â”‚
                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                       â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ ğŸ§² Magnetic Sensorâ”‚  Buried in ground
              â”‚ (Magnetometer)    â”‚  Detects metal mass change
              â”‚                   â”‚  Battery: 5-10 years
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ LoRaWAN (low power, long range)
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  LoRa Gateway   â”‚  Range: 2-15 km
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“

ALL OPTIONS CONVERGE TO:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   DATA NORMALIZATION     â”‚
              â”‚   & VALIDATION           â”‚
              â”‚                          â”‚
              â”‚   â€¢ Schema validation    â”‚
              â”‚   â€¢ Duplicate filtering  â”‚
              â”‚   â€¢ Timestamp sync       â”‚
              â”‚   â€¢ Quality checks       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   BACKEND INGESTION      â”‚
              â”‚   (Go Server :8080)      â”‚
              â”‚                          â”‚
              â”‚   WebSocket endpoint:    â”‚
              â”‚   /ws/parking/updates    â”‚
              â”‚                          â”‚
              â”‚   OR REST endpoint:      â”‚
              â”‚   POST /api/slots/update â”‚
              â”‚                          â”‚
              â”‚   â€¢ Update slot status   â”‚
              â”‚   â€¢ Broadcast to clients â”‚
              â”‚   â€¢ Log to database      â”‚
              â”‚   â€¢ Trigger pricing      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   REAL-TIME DISTRIBUTION â”‚
              â”‚                          â”‚
              â”‚   â€¢ WebSocket push       â”‚
              â”‚   â€¢ Server-Sent Events   â”‚
              â”‚   â€¢ Mobile push notify   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
                     ğŸ“± Mobile App
                  (Live slot updates)
```

---

## Dynamic Pricing Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PRICING DECISION ENGINE                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TRIGGER: User requests parking slot details
   â”‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Flutter App: PricingService.predictPrice()                  â”‚
â”‚                                                              â”‚
â”‚  Input Context:                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ â€¢ slotId: "MUM_AIRPORT_A01"                        â”‚     â”‚
â”‚  â”‚ â€¢ basePrice: 50                                    â”‚     â”‚
â”‚  â”‚ â€¢ parkingType: "airport"                           â”‚     â”‚
â”‚  â”‚ â€¢ city: "Mumbai"                                   â”‚     â”‚
â”‚  â”‚ â€¢ latitude: 19.0896                                â”‚     â”‚
â”‚  â”‚ â€¢ longitude: 72.8656                               â”‚     â”‚
â”‚  â”‚ â€¢ timestamp: "2025-11-08T18:30:00"                 â”‚     â”‚
â”‚  â”‚ â€¢ amenities: ["ev_charging", "security"]           â”‚     â”‚
â”‚  â”‚ â€¢ currentOccupancy: 0.85 (85%)                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Health Check          â”‚
              â”‚  isHealthy()?          â”‚
              â”‚  GET /health           â”‚
              â”‚  Timeout: 3s           â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                              â”‚
    API Available                 API Down
    (200 OK)                      (Timeout/Error)
        â”‚                              â”‚
        â†“                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ API MODE      â”‚         â”‚  ğŸ­ SIMULATION     â”‚
â”‚                   â”‚         â”‚     MODE           â”‚
â”‚  HTTP POST        â”‚         â”‚  (Auto-enabled)    â”‚
â”‚  localhost:5000   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  /api/predict-    â”‚                  â”‚
â”‚       price       â”‚                  â”‚
â”‚                   â”‚                  â”‚
â”‚  Request Body:    â”‚                  â”‚
â”‚  {               â”‚                  â”‚
â”‚   "city": "...", â”‚                  â”‚
â”‚   "parking_type":â”‚                  â”‚
â”‚   "base_price": ,â”‚                  â”‚
â”‚   "hour": 18,    â”‚                  â”‚
â”‚   "day": 1,      â”‚                  â”‚
â”‚   "occupancy": , â”‚                  â”‚
â”‚   ... 26 fields  â”‚                  â”‚
â”‚  }               â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
          â”‚                            â”‚
          â†“                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Python ML API          â”‚   â”‚  PricingSimulator          â”‚
â”‚  (Flask Server)         â”‚   â”‚  (Dart Class)              â”‚
â”‚                         â”‚   â”‚                            â”‚
â”‚  ğŸ§  XGBoost Model       â”‚   â”‚  Multiplier-based calc     â”‚
â”‚  â€¢ Load model.pkl       â”‚   â”‚                            â”‚
â”‚  â€¢ Feature engineering  â”‚   â”‚  1. Parking Type           â”‚
â”‚  â€¢ Input validation     â”‚   â”‚     Airport = 2.5x         â”‚
â”‚  â€¢ Predict price        â”‚   â”‚  2. Time of Day            â”‚
â”‚  â€¢ Calculate metrics    â”‚   â”‚     6 PM = 1.6x           â”‚
â”‚                         â”‚   â”‚  3. Day of Week            â”‚
â”‚  Training:              â”‚   â”‚     Monday = 1.2x          â”‚
â”‚  â€¢ 75,000 samples       â”‚   â”‚  4. City                   â”‚
â”‚  â€¢ Random Forest        â”‚   â”‚     Mumbai = 1.3x          â”‚
â”‚  â€¢ Gradient Boosting    â”‚   â”‚  5. Demand (from occupancy)â”‚
â”‚  â€¢ XGBoost (best)       â”‚   â”‚     85% â†’ High = 1.5x      â”‚
â”‚                         â”‚   â”‚  6. Occupancy              â”‚
â”‚  Performance:           â”‚   â”‚     85% = 1.35x            â”‚
â”‚  â€¢ RÂ² = 0.90            â”‚   â”‚  7. Weather                â”‚
â”‚  â€¢ MAE = â‚¹10            â”‚   â”‚     Clear = 1.0x           â”‚
â”‚  â€¢ Latency: 100ms       â”‚   â”‚  8. Event                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     None = 1.0x            â”‚
          â”‚                   â”‚  9. EV Charging            â”‚
          â”‚                   â”‚     Yes = 1.2x             â”‚
          â†“                   â”‚  10. Handicap              â”‚
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚     No = 1.0x              â”‚
 â”‚  ML Response     â”‚         â”‚                            â”‚
 â”‚  {               â”‚         â”‚  Final = â‚¹50 Ã— 2.5 Ã— 1.6  â”‚
 â”‚   "predicted":   â”‚         â”‚       Ã— 1.2 Ã— 1.3 Ã— 1.5   â”‚
 â”‚      185.50,     â”‚         â”‚       Ã— 1.35 Ã— 1.2         â”‚
 â”‚   "base": 50,    â”‚         â”‚       = â‚¹655.20            â”‚
 â”‚   "multiplier":  â”‚         â”‚                            â”‚
 â”‚      3.71,       â”‚         â”‚  Latency: <1ms             â”‚
 â”‚   "confidence":  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 â”‚      0.92        â”‚                  â”‚
 â”‚  }               â”‚                  â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
           â”‚                           â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  PricePrediction Object   â”‚
           â”‚                           â”‚
           â”‚  â€¢ predictedPrice: 185.50 â”‚
           â”‚  â€¢ basePrice: 50.00       â”‚
           â”‚  â€¢ priceMultiplier: 3.71  â”‚
           â”‚  â€¢ confidence: HIGH       â”‚
           â”‚  â€¢ demandLevel: "high"    â”‚
           â”‚  â€¢ timestamp: ...         â”‚
           â”‚  â€¢ source: "api"/"sim"    â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  Update ParkingSlot Model â”‚
           â”‚                           â”‚
           â”‚  slot.dynamicPrice = 185  â”‚
           â”‚  slot.priceMultiplier=3.7 â”‚
           â”‚  slot.demandLevel = "high"â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  UI Render                â”‚
           â”‚  DynamicPriceWidget       â”‚
           â”‚                           â”‚
           â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—   â”‚
           â”‚  â•‘ ğŸ”´ SURGE PRICING  â•‘   â”‚
           â”‚  â•‘ â‚¹185/hr           â•‘   â”‚
           â”‚  â•‘ (was â‚¹50/hr)      â•‘   â”‚
           â”‚  â•‘ 3.7x surge        â•‘   â”‚
           â”‚  â•‘ High demand       â•‘   â”‚
           â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Booking System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     COMPLETE BOOKING LIFECYCLE                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: User Discovery
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤ User opens app
   â”‚
   â”œâ”€â†’ ğŸ“ GPS gets current location: (19.0760, 72.8777)
   â”‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ParkingService.searchNearby()       â”‚
â”‚                                      â”‚
â”‚  HTTP GET /api/parking/search        â”‚
â”‚  ?lat=19.0760                        â”‚
â”‚  &lng=72.8777                        â”‚
â”‚  &radius=5000                        â”‚
â”‚  &type=all                           â”‚
â”‚  &available=true                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Go Backend: Slot Discovery          â”‚
â”‚                                      â”‚
â”‚  1. Convert lat/lng â†’ H3 index       â”‚
â”‚     geoToH3(19.0760, 72.8777, 9)     â”‚
â”‚     â†’ 89283082a3ffff                 â”‚
â”‚                                      â”‚
â”‚  2. Get hexagon + neighbors (k=2)    â”‚
â”‚     kRing(89283082a3ffff, 2)         â”‚
â”‚     â†’ [hex1, hex2, ..., hex18]       â”‚
â”‚                                      â”‚
â”‚  3. Lookup slots in H3 index         â”‚
â”‚     slots := []                      â”‚
â”‚     for hex in hexagons:             â”‚
â”‚       slots += h3Index[hex]          â”‚
â”‚                                      â”‚
â”‚  4. Filter available slots           â”‚
â”‚     slots.filter(s => !s.isOccupied) â”‚
â”‚                                      â”‚
â”‚  5. Bipartite Matching               â”‚
â”‚     For each slot, calculate score:  â”‚
â”‚     score = w1Ã—distance              â”‚
â”‚           + w2Ã—price                 â”‚
â”‚           + w3Ã—amenities_match       â”‚
â”‚     Sort by score DESC               â”‚
â”‚                                      â”‚
â”‚  6. Return top N (default: 50)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Response: [{slot1}, {slot2}, ...]
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Flutter App: Enrich with Pricing    â”‚
â”‚                                      â”‚
â”‚  For each slot:                      â”‚
â”‚    price = await predictPrice(slot)  â”‚
â”‚    slot.dynamicPrice = price         â”‚
â”‚                                      â”‚
â”‚  Render on map:                      â”‚
â”‚    â€¢ Green markers (available)       â”‚
â”‚    â€¢ Price labels                    â”‚
â”‚    â€¢ Cluster icons (zoomed out)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
      ğŸ—ºï¸  Map View
         (User sees slots)


STEP 2: Slot Selection
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤ User taps on marker
   â”‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Show Slot Details Bottom Sheet      â”‚
â”‚                                      â”‚
â”‚  ğŸ“ Mumbai Airport - A01             â”‚
â”‚  ğŸ’° â‚¹185/hr (3.7x surge)             â”‚
â”‚  ğŸ“ 2.3 km away                      â”‚
â”‚  âš¡ Amenities: EV, Security          â”‚
â”‚  ğŸ“Š Availability: 80%                â”‚
â”‚                                      â”‚
â”‚  [ ğŸ“ Navigate ]  [ ğŸ“… Book Now ]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ User clicks "Book Now"
           â†“


STEP 3: Booking Configuration
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Booking Configuration Screen        â”‚
â”‚                                      â”‚
â”‚  â° Select Duration:                 â”‚
â”‚     From: [2:00 PM] â–¼                â”‚
â”‚     To:   [5:00 PM] â–¼                â”‚
â”‚     Duration: 3 hours                â”‚
â”‚                                      â”‚
â”‚  ğŸš— Vehicle Details:                 â”‚
â”‚     Type: [Car] â–¼                    â”‚
â”‚     Number: [MH 02 XX 1234]          â”‚
â”‚                                      â”‚
â”‚  ğŸ’³ Payment Summary:                 â”‚
â”‚     Base: â‚¹185 Ã— 3 hrs = â‚¹555       â”‚
â”‚     Tax (18%):          +â‚¹99.90     â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚     Total:              â‚¹654.90     â”‚
â”‚                                      â”‚
â”‚  [ Proceed to Payment ]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ User confirms
           â†“


STEP 4: Create Booking (Pending State)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BookingService.createBooking()      â”‚
â”‚                                      â”‚
â”‚  HTTP POST /api/booking/create       â”‚
â”‚  {                                   â”‚
â”‚    "slotId": "MUM_AIRPORT_A01",      â”‚
â”‚    "userId": "user_123",             â”‚
â”‚    "startTime": "2025-11-08T14:00",  â”‚
â”‚    "endTime": "2025-11-08T17:00",    â”‚
â”‚    "vehicleNumber": "MH02XX1234",    â”‚
â”‚    "vehicleType": "car",             â”‚
â”‚    "amount": 654.90                  â”‚
â”‚  }                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Go Backend: Create Booking          â”‚
â”‚                                      â”‚
â”‚  1. Validate slot availability       â”‚
â”‚     â€¢ Check if slot is free          â”‚
â”‚     â€¢ Check time slot conflicts      â”‚
â”‚                                      â”‚
â”‚  2. Generate booking ID              â”‚
â”‚     bookingId = uuid.New()           â”‚
â”‚                                      â”‚
â”‚  3. Create booking record            â”‚
â”‚     booking := Booking{              â”‚
â”‚       ID: bookingId,                 â”‚
â”‚       Status: "pending",             â”‚
â”‚       ExpiresAt: now + 15min,        â”‚
â”‚       ...                            â”‚
â”‚     }                                â”‚
â”‚                                      â”‚
â”‚  4. Reserve slot (soft lock)         â”‚
â”‚     slot.status = "reserved"         â”‚
â”‚     slot.reservedUntil = now + 15min â”‚
â”‚                                      â”‚
â”‚  5. Start expiry timer               â”‚
â”‚     if not confirmed in 15min:       â”‚
â”‚       cancel booking                 â”‚
â”‚       release slot                   â”‚
â”‚                                      â”‚
â”‚  6. Return booking ID + payment link â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Response: {bookingId, paymentUrl, expiresAt}
           â†“


STEP 5: Payment Processing
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Payment Gateway Integration         â”‚
â”‚  (Razorpay/Stripe/PayTM)             â”‚
â”‚                                      â”‚
â”‚  User selects payment method:        â”‚
â”‚  â€¢ UPI                               â”‚
â”‚  â€¢ Credit/Debit Card                 â”‚
â”‚  â€¢ Wallet (PayTM/PhonePe)            â”‚
â”‚                                      â”‚
â”‚  Payment flow:                       â”‚
â”‚  1. Redirect to gateway              â”‚
â”‚  2. User completes payment           â”‚
â”‚  3. Gateway callback                 â”‚
â”‚     POST /api/payment/callback       â”‚
â”‚     {                                â”‚
â”‚       "bookingId": "...",            â”‚
â”‚       "status": "success",           â”‚
â”‚       "transactionId": "...",        â”‚
â”‚       "amount": 654.90               â”‚
â”‚     }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Payment Success
           â†“


STEP 6: Confirm Booking
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POST /api/booking/:id/confirm       â”‚
â”‚                                      â”‚
â”‚  Go Backend:                         â”‚
â”‚  1. Verify payment                   â”‚
â”‚     â€¢ Check transaction status       â”‚
â”‚     â€¢ Verify amount matches          â”‚
â”‚                                      â”‚
â”‚  2. Update booking status            â”‚
â”‚     booking.status = "confirmed"     â”‚
â”‚     booking.paymentId = txnId        â”‚
â”‚                                      â”‚
â”‚  3. Lock slot permanently            â”‚
â”‚     slot.status = "occupied"         â”‚
â”‚     slot.bookingId = bookingId       â”‚
â”‚     slot.occupiedUntil = endTime     â”‚
â”‚                                      â”‚
â”‚  4. Generate access credentials      â”‚
â”‚     â€¢ Entry code: random 4-digit     â”‚
â”‚     â€¢ QR code: encrypted booking ID  â”‚
â”‚                                      â”‚
â”‚  5. Send notifications               â”‚
â”‚     â€¢ Push notification to app       â”‚
â”‚     â€¢ SMS with entry code            â”‚
â”‚     â€¢ Email confirmation             â”‚
â”‚                                      â”‚
â”‚  6. Return booking details           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“


STEP 7: Active Booking
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Flutter App: Active Booking Screen  â”‚
â”‚                                      â”‚
â”‚  âœ… Booking Confirmed                â”‚
â”‚  Slot: MUM_AIRPORT_A01               â”‚
â”‚                                      â”‚
â”‚  â° Time: 2:00 PM - 5:00 PM          â”‚
â”‚  â³ Remaining: 2h 47m                â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 92%                â”‚
â”‚                                      â”‚
â”‚  ğŸ”¢ Entry Code: #4729                â”‚
â”‚  ğŸ“± QR Code: [â–“â–“â–“â–“â–“â–“â–“â–“]              â”‚
â”‚                                      â”‚
â”‚  ğŸ—ºï¸  Navigation:                    â”‚
â”‚  "Turn right in 200m..."             â”‚
â”‚                                      â”‚
â”‚  Actions:                            â”‚
â”‚  [ ğŸ—ºï¸  Navigate ]                    â”‚
â”‚  [ â° Extend Booking ]                â”‚
â”‚  [ âœ•  Cancel Booking ]               â”‚
â”‚                                      â”‚
â”‚  Background:                         â”‚
â”‚  â€¢ Live countdown timer              â”‚
â”‚  â€¢ Notifications:                    â”‚
â”‚    - 30 min before expiry            â”‚
â”‚    - 10 min before expiry            â”‚
â”‚    - Expiry warning                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 8: Check-in (Entry)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤ User arrives at parking lot
   â”‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Entry Gate System                   â”‚
â”‚                                      â”‚
â”‚  User presents:                      â”‚
â”‚  â€¢ QR code (scan), OR                â”‚
â”‚  â€¢ Entry code #4729 (keypad)         â”‚
â”‚                                      â”‚
â”‚  Gate System:                        â”‚
â”‚  1. Scan/read code                   â”‚
â”‚  2. HTTP GET /api/booking/verify     â”‚
â”‚     ?code=4729                       â”‚
â”‚  3. Backend validates:               â”‚
â”‚     â€¢ Booking exists                 â”‚
â”‚     â€¢ Status = confirmed             â”‚
â”‚     â€¢ Current time within range      â”‚
â”‚  4. Grant access:                    â”‚
â”‚     â€¢ Open barrier                   â”‚
â”‚     â€¢ Display: "Welcome! Slot A01"   â”‚
â”‚  5. Update booking:                  â”‚
â”‚     booking.checkInTime = now        â”‚
â”‚     booking.status = "active"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 9: Check-out (Exit)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘¤ User leaves parking lot
   â”‚
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Exit Gate System                    â”‚
â”‚                                      â”‚
â”‚  1. Scan QR/enter code               â”‚
â”‚  2. Backend checks:                  â”‚
â”‚     â€¢ Valid booking                  â”‚
â”‚     â€¢ Already checked in             â”‚
â”‚  3. Calculate final amount:          â”‚
â”‚     if exitTime > endTime:           â”‚
â”‚       overstay = exitTime - endTime  â”‚
â”‚       penalty = overstay Ã— rate Ã— 2  â”‚
â”‚       total += penalty               â”‚
â”‚  4. Process payment (if penalty)     â”‚
â”‚  5. Update booking:                  â”‚
â”‚     booking.checkOutTime = now       â”‚
â”‚     booking.status = "completed"     â”‚
â”‚  6. Release slot:                    â”‚
â”‚     slot.status = "available"        â”‚
â”‚     slot.bookingId = null            â”‚
â”‚  7. Open exit barrier                â”‚
â”‚  8. Send receipt email/SMS           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 10: Post-Booking
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Flutter App: Booking Complete       â”‚
â”‚                                      â”‚
â”‚  âœ… Parking Session Completed        â”‚
â”‚                                      â”‚
â”‚  Duration: 3h 12m                    â”‚
â”‚  Amount Paid: â‚¹654.90                â”‚
â”‚  Overstay: 12 min (+â‚¹37.10)          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚  Total: â‚¹692.00                      â”‚
â”‚                                      â”‚
â”‚  [ ğŸ“§ Email Receipt ]                â”‚
â”‚  [ â­ Rate Experience ]               â”‚
â”‚  [ ğŸ“‹ View Invoice ]                 â”‚
â”‚                                      â”‚
â”‚  Backend Actions:                    â”‚
â”‚  â€¢ Store in booking history          â”‚
â”‚  â€¢ Update user parking stats         â”‚
â”‚  â€¢ Aggregate data for ML training    â”‚
â”‚  â€¢ Generate analytics reports        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPLETE DATA FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sensors â†’ Gateway â†’ Backend â†’ App â†’ User
  â†“         â†“         â†“        â†“      â†“
  â†“         â†“         â†“        â†“      â†“
Status    Buffer   Update   Display  View
Update    MQTT     Database  Map     Slots
  â†“         â†“         â†“        â†“      â†“
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â†“
            [ Real-time Updates ]
                    â”‚
                    â†“
            WebSocket/Polling
                    â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
           â†“                 â†“
       App Updates      Backend Triggers
       â€¢ Slot status    â€¢ Pricing update
       â€¢ Availability   â€¢ Demand calculation
       â€¢ Pricing        â€¢ Analytics
```

---

**System Capabilities:**
- âš¡ **Real-time**: <500ms slot status updates
- ğŸŒ **Scalable**: Supports 10,000+ concurrent users
- ğŸ¯ **Accurate**: 95%+ pricing prediction accuracy  
- ğŸ“± **Offline**: Core features work without ML API
- ğŸ”’ **Secure**: End-to-end encrypted bookings
- ğŸ’° **Dynamic**: Prices adjust based on 26+ factors

---
```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         PRICING MODE DECISION POINT              â”‚
        â”‚                                                  â”‚
        â”‚  isHealthy() â†’ Check ML API availability         â”‚
        â”‚                                                  â”‚
        â”‚  âœ“ API Reachable          âœ— API Unreachable     â”‚
        â”‚    (200 OK)                  (Timeout/Error)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                          â”‚
                 â†“                          â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    ğŸŒ API MODE         â”‚   â”‚   ğŸ­ SIMULATION MODE    â”‚
    â”‚                        â”‚   â”‚                         â”‚
    â”‚ Uses Real ML Model     â”‚   â”‚ Uses Local Algorithms   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                              â”‚
             â†“                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  Python ML API         â”‚                  â”‚
â”‚  (Flask, Port 5000)    â”‚                  â”‚
â”‚                        â”‚                  â”‚
â”‚ â€¢ XGBoost Model        â”‚                  â”‚
â”‚ â€¢ 26+ Features         â”‚                  â”‚
â”‚ â€¢ RÂ² Score: 0.88-0.92  â”‚                  â”‚
â”‚ â€¢ Response: 50-200ms   â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
             â”‚                              â”‚
             â”‚ Prediction                   â”‚
             â†“                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚        ğŸ¯ DYNAMIC PRICE RESULT         â”‚
        â”‚                                        â”‚
        â”‚ â€¢ Predicted Price: â‚¹XX/hr             â”‚
        â”‚ â€¢ Base Price: â‚¹YY/hr                  â”‚
        â”‚ â€¢ Multiplier: X.Xx                    â”‚
        â”‚ â€¢ Demand Level: High/Medium/Low       â”‚
        â”‚ â€¢ Confidence: High/Medium             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      Dynamic Price Display Widget       â”‚
        â”‚                                        â”‚
        â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—     â”‚
        â”‚  â•‘ ğŸ”´ SURGE PRICING             â•‘     â”‚
        â”‚  â•‘ â‚¹185/hr  (was â‚¹150/hr)       â•‘     â”‚
        â”‚  â•‘ 1.5x surge â€¢ High demand     â•‘     â”‚
        â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Pricing Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Request â”‚
â”‚ for Parking  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Collect Context Information  â”‚
â”‚ â€¢ Time of day (hour)         â”‚
â”‚ â€¢ Day of week                â”‚
â”‚ â€¢ City & area                â”‚
â”‚ â€¢ Parking type               â”‚
â”‚ â€¢ Base price                 â”‚
â”‚ â€¢ Current demand             â”‚
â”‚ â€¢ Occupancy rate             â”‚
â”‚ â€¢ Weather (optional)         â”‚
â”‚ â€¢ Events (optional)          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PricingService.predictPrice()â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check: _useSimulation flag?  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ TRUE â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚ PricingSimulator                â”‚
       â”‚             â”‚ .simulatePricePrediction()      â”‚
       â”‚             â”‚                                 â”‚
       â”‚             â”‚ 1. Parking Type Multiplier      â”‚
       â”‚             â”‚    (0.8x - 2.5x)               â”‚
       â”‚             â”‚ 2. Time Multiplier              â”‚
       â”‚             â”‚    (0.8x - 1.6x)               â”‚
       â”‚             â”‚ 3. Day of Week Multiplier       â”‚
       â”‚             â”‚    (0.9x - 1.2x)               â”‚
       â”‚             â”‚ 4. City Multiplier              â”‚
       â”‚             â”‚    (1.0x - 1.3x)               â”‚
       â”‚             â”‚ 5. Demand Multiplier            â”‚
       â”‚             â”‚    (0.85x - 1.8x)              â”‚
       â”‚             â”‚ 6. Occupancy Multiplier         â”‚
       â”‚             â”‚    (1.0x - 1.5x)               â”‚
       â”‚             â”‚ 7. Weather Multiplier           â”‚
       â”‚             â”‚    (1.0x - 1.3x)               â”‚
       â”‚             â”‚ 8. Event Multiplier (1.3x)      â”‚
       â”‚             â”‚ 9. EV Charging (1.2x)           â”‚
       â”‚             â”‚ 10. Handicap Discount (0.9x)    â”‚
       â”‚             â”‚                                 â”‚
       â”‚             â”‚ Final = Base Ã— All Multipliers  â”‚
       â”‚             â”‚ Response Time: <1ms             â”‚
       â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                           â”‚
       â””â”€â”€â”€ FALSE â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ HTTP POST to ML API            â”‚
                      â”‚ http://localhost:5000/api/     â”‚
                      â”‚       predict-price            â”‚
                      â”‚                                â”‚
                      â”‚ Timeout: 5 seconds             â”‚
                      â”‚                                â”‚
                      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                      â”‚ â”‚ XGBoost ML Model           â”‚ â”‚
                      â”‚ â”‚ â€¢ 26+ engineered features  â”‚ â”‚
                      â”‚ â”‚ â€¢ Trained on 75k samples   â”‚ â”‚
                      â”‚ â”‚ â€¢ Considers interactions   â”‚ â”‚
                      â”‚ â”‚ â€¢ Historical patterns      â”‚ â”‚
                      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                      â”‚                                â”‚
                      â”‚ Response Time: 50-200ms        â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â†“
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ Success?           â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                         â”‚
                YES                        NO
                  â”‚                         â”‚
                  â†“                         â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Return Result  â”‚      â”‚ FALLBACK: Use        â”‚
         â”‚ from ML API    â”‚      â”‚ Simulation Instead   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                         â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ PricePrediction Object â”‚
                  â”‚                        â”‚
                  â”‚ â€¢ predictedPrice       â”‚
                  â”‚ â€¢ basePrice            â”‚
                  â”‚ â€¢ priceMultiplier      â”‚
                  â”‚ â€¢ confidence           â”‚
                  â”‚ â€¢ timestamp            â”‚
                  â”‚ â€¢ featuresUsed         â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Update Parking Model   â”‚
                  â”‚ â€¢ dynamicPrice = XX    â”‚
                  â”‚ â€¢ priceMultiplier = Y  â”‚
                  â”‚ â€¢ demandLevel = "high" â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Render UI with Pricing â”‚
                  â”‚                        â”‚
                  â”‚ â€¢ Strikethrough base   â”‚
                  â”‚ â€¢ Colored dynamic priceâ”‚
                  â”‚ â€¢ Surge/discount badge â”‚
                  â”‚ â€¢ Demand indicator     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Simulation Mode Decision Tree

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  App Starts     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ isHealthy() called  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ HTTP GET /health    â”‚
                    â”‚ Timeout: 3 seconds  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚                               â”‚
             â†“                               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 200 OK         â”‚            â”‚ Error/Timeout    â”‚
    â”‚ status=healthy â”‚            â”‚ Connection failedâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                              â”‚
             â†“                              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Keep API Mode  â”‚            â”‚ Enable Simulationâ”‚
    â”‚ _useSimulation â”‚            â”‚ _useSimulation   â”‚
    â”‚    = false     â”‚            â”‚    = true        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                              â”‚
             â†“                              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ğŸŒ Using real  â”‚            â”‚ ğŸ­ Auto-enabled  â”‚
    â”‚    ML API      â”‚            â”‚   simulation     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


         MANUAL OVERRIDE AVAILABLE AT ANY TIME:
         
         setSimulationMode(true)  â†’  ğŸ­ Simulation
         setSimulationMode(false) â†’  ğŸŒ API Mode
```

## Price Calculation Example: Airport Parking

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            BASE SCENARIO: Airport Parking                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Location:  Mumbai Airport (Andheri)                         â”‚
â”‚ Time:      6:00 PM Monday                                   â”‚
â”‚ Type:      Airport                                          â”‚
â”‚ Base:      â‚¹50/hour                                         â”‚
â”‚ Demand:    High (80/100)                                    â”‚
â”‚ Occupancy: 90%                                              â”‚
â”‚ Weather:   Clear                                            â”‚
â”‚ EV:        No                                               â”‚
â”‚ Event:     No                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MULTIPLIER CALCULATION:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Factor              â”‚ Value    â”‚ Multiplier â”‚ Running Total â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Base Price          â”‚ â‚¹50      â”‚ 1.00x      â”‚ â‚¹50.00        â”‚
â”‚ 1. Parking Type     â”‚ Airport  â”‚ 2.50x      â”‚ â‚¹125.00       â”‚
â”‚ 2. Time (6 PM)      â”‚ Eve Rush â”‚ 1.60x      â”‚ â‚¹200.00       â”‚
â”‚ 3. Day (Monday)     â”‚ Weekday  â”‚ 1.20x      â”‚ â‚¹240.00       â”‚
â”‚ 4. City (Mumbai)    â”‚ Tier-1   â”‚ 1.30x      â”‚ â‚¹312.00       â”‚
â”‚ 5. Demand (80)      â”‚ High     â”‚ 1.50x      â”‚ â‚¹468.00       â”‚
â”‚ 6. Occupancy (90%)  â”‚ Very Highâ”‚ 1.40x      â”‚ â‚¹655.20       â”‚
â”‚ 7. Weather (Clear)  â”‚ Normal   â”‚ 1.00x      â”‚ â‚¹655.20       â”‚
â”‚ 8. Event            â”‚ No       â”‚ 1.00x      â”‚ â‚¹655.20       â”‚
â”‚ 9. EV Charging      â”‚ No       â”‚ 1.00x      â”‚ â‚¹655.20       â”‚
â”‚ 10. Handicap        â”‚ No       â”‚ 1.00x      â”‚ â‚¹655.20       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NOTE: Final price rounded to â‚¹655/hour
Combined Multiplier: 13.1x (655/50)

UI DISPLAY:
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ”´ SURGE PRICING                 â•‘
â•‘ â‚¹655/hr  (was â‚¹50/hr)            â•‘
â•‘ 13.1x surge â€¢ Very High Demand   â•‘
â•‘ 90% occupied                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## Comparison: API vs Simulation Mode

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ğŸŒ API MODE (ML Model)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input:  City, Type, Time, Demand, etc. (26+ features)      â”‚
â”‚   â†“                                                         â”‚
â”‚ Process: XGBoost ML Model                                   â”‚
â”‚   â€¢ Trained on 75k+ real/synthetic samples                 â”‚
â”‚   â€¢ Considers feature interactions                          â”‚
â”‚   â€¢ Non-linear patterns                                     â”‚
â”‚   â€¢ Historical trends                                       â”‚
â”‚   â†“                                                         â”‚
â”‚ Output: Predicted Price Â± Confidence                        â”‚
â”‚   â€¢ Response Time: 50-200ms                                 â”‚
â”‚   â€¢ Accuracy: RÂ² 0.88-0.92                                 â”‚
â”‚   â€¢ Network: Required                                       â”‚
â”‚   â€¢ Battery: Normal consumption                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ğŸ­ SIMULATION MODE (Local Algorithms)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input:  City, Type, Time, Demand, etc. (same features)     â”‚
â”‚   â†“                                                         â”‚
â”‚ Process: Multiplier-based calculation                       â”‚
â”‚   â€¢ 10 independent multipliers                              â”‚
â”‚   â€¢ Aligned with training data ranges                       â”‚
â”‚   â€¢ Linear combination                                      â”‚
â”‚   â€¢ Simulated demand if not provided                        â”‚
â”‚   â†“                                                         â”‚
â”‚ Output: Calculated Price (High Confidence)                  â”‚
â”‚   â€¢ Response Time: <1ms                                     â”‚
â”‚   â€¢ Accuracy: ~95% match with API (similar inputs)         â”‚
â”‚   â€¢ Network: Not required                                   â”‚
â”‚   â€¢ Battery: Minimal (no network calls)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

COMPARISON MATRIX:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Metric           â”‚ API Mode     â”‚ Simulation Mode  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Speed            â”‚ 50-200ms     â”‚ <1ms (200x)     â”‚
â”‚ Accuracy         â”‚ 100%         â”‚ ~95%            â”‚
â”‚ Network          â”‚ Required     â”‚ None            â”‚
â”‚ Reliability      â”‚ Depends      â”‚ 100%            â”‚
â”‚ Battery          â”‚ Normal       â”‚ Minimal         â”‚
â”‚ Offline          â”‚ âœ—            â”‚ âœ“               â”‚
â”‚ Learning         â”‚ âœ“ (can train)â”‚ âœ— (fixed)       â”‚
â”‚ Complexity       â”‚ High         â”‚ Medium          â”‚
â”‚ Setup            â”‚ API + Model  â”‚ None            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ predictPrice()       â”‚
â”‚ called               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check _useSimulation â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ TRUE â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚ Use Simulatorâ”‚ â”€â”€â”€â†’ Always Succeeds
       â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â”€â”€ FALSE â”€â”€â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ Try API Call         â”‚
                      â”‚ Timeout: 5 seconds   â”‚
                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                             â”‚
          SUCCESS                        ERROR
              â”‚                             â”‚
              â†“                             â†“
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Return API     â”‚          â”‚ Log Error           â”‚
     â”‚ Response       â”‚          â”‚ "Error in predict..." â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ FALLBACK: Call       â”‚
                              â”‚ _simulator           â”‚
                              â”‚ .simulatePrice()     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Return Simulated     â”‚
                              â”‚ Response             â”‚
                              â”‚ (seamless to user)   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Flutter App                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â†’ parking_search_screen.dart
        â”‚   â””â”€â†’ Initializes PricingService
        â”‚
        â”œâ”€â†’ parking_service.dart
        â”‚   â””â”€â†’ Enriches slots with pricing
        â”‚
        â”œâ”€â†’ pricing_service.dart â† [MAIN INTEGRATION POINT]
        â”‚   â”œâ”€â†’ Imports pricing_simulator.dart
        â”‚   â”œâ”€â†’ Manages _useSimulation flag
        â”‚   â”œâ”€â†’ Calls API or simulator
        â”‚   â””â”€â†’ Handles errors with fallback
        â”‚
        â”œâ”€â†’ pricing_simulator.dart â† [SIMULATION ENGINE]
        â”‚   â”œâ”€â†’ simulatePricePrediction()
        â”‚   â”œâ”€â†’ simulateBatchPredictions()
        â”‚   â”œâ”€â†’ simulateDemandCalculation()
        â”‚   â””â”€â†’ 10+ helper methods for multipliers
        â”‚
        â”œâ”€â†’ dynamic_price_widget.dart
        â”‚   â”œâ”€â†’ DynamicPriceDisplay (full)
        â”‚   â””â”€â†’ CompactPriceDisplay
        â”‚
        â”œâ”€â†’ parking_bottom_sheet.dart
        â”‚   â””â”€â†’ Shows dynamic prices in slot details
        â”‚
        â”œâ”€â†’ parking_model.dart
        â”‚   â”œâ”€â†’ dynamicPrice
        â”‚   â”œâ”€â†’ priceMultiplier
        â”‚   â”œâ”€â†’ demandScore
        â”‚   â””â”€â†’ effectivePrice getter
        â”‚
        â””â”€â†’ app_config.dart
            â””â”€â†’ pricingApiUrl = 'http://10.0.2.2:5000'

External Dependencies:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Python ML API (Optional)                â”‚
â”‚ â€¢ Flask server on port 5000             â”‚
â”‚ â€¢ XGBoost model                         â”‚
â”‚ â€¢ Only needed for API mode              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Go Backend (Required for parking data)  â”‚
â”‚ â€¢ Gin server on port 8080               â”‚
â”‚ â€¢ H3 geospatial indexing                â”‚
â”‚ â€¢ Provides parking slot data            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Legend**:
- ğŸŒ = API Mode (real ML model)
- ğŸ­ = Simulation Mode (local algorithms)
- âœ“ = Supported/Available
- âœ— = Not Supported/Unavailable
- â†’ = Data/control flow
- â†“ = Sequential step

This architecture ensures **zero downtime** for pricing features with seamless automatic fallback! ğŸš€
